<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset=UTF-8>
        <script type="module">
            import { Inventory } from "./inventory.js";
            import { WorldState } from "./worldState.js";
            // toggle inventory
            const inventory = document.getElementById("inventory");

            // Pressing the "i" key will toggle the inventory
            document.addEventListener("keydown", function(event) {
                if (event.key === "i") {
                    inventory.toggle();
                }
            });

            let worldState = await WorldState.init({
                map: "BasicMap.json",
                monsterSet: "Monsters.json",
                playerSet: "Player.json",
            });



            let playerInventory = [4, 10, 3, 9, 8, 7, 12, 52, 13, 1,100, 111, 112].map((id) => {
                let item = worldState.items[id];
                let image = worldState.itemImages[item.tileNumber].cloneNode(false);
                return { id, image, item};
            });
            let sword = worldState.items.findIndex((item) => item.name === "Sword");
            let swordItem  = {
                id: sword,
                image: worldState.itemImages[worldState.items[sword].tileNumber].cloneNode(false),
                item: worldState.items[sword],
            }
            playerInventory.push(swordItem);

            let equippedItems = {
                head: null,
                leftHand: swordItem,
                rightHand: null,
                torso: null,
                legs: null,
                leftFoot: null,
                rightFoot: null,
            };

            inventory.update(playerInventory, equippedItems);
        </script>
    </head>
    <body style="position:fixed; padding:0; margin:0; top:0; left:0; width: 100%; height: 100%; box-sizing: border-box">
        <player-inventory id="inventory"></player-inventory>
    </body>
</html>

